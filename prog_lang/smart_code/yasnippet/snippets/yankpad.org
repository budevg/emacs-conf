* download
** youtube                                                          :results:
   #+BEGIN_SRC emacs-lisp
     (let* ((copied-str (current-kill 0 t))
            (resolution 720)
            (youtube-regex "^https?://")
            (url (if (string-match-p youtube-regex copied-str)
                     copied-str
                   "${1:url}")))
       (format "yt-dlp -f 'bestvideo[height<=?%d]+bestaudio/best' '%s'" resolution url))
   #+END_SRC
* docker
** build
   docker build  -t ${1:test} --progress plain .$0
** run-ui
   xhost +local: && docker run --rm -it -e DISPLAY=unix$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix -v \`pwd\`:\`pwd\` -w \`pwd\` ${1:nixos/nix}; xhost -local:$0
** run
   docker run --rm -it -v \`pwd\`:\`pwd\` -w \`pwd\` ${1:nixos/nix}$0
** ubuntu                                                  :src:indent_fixed:
   #+BEGIN_SRC dockerfile
     FROM ubuntu:devel

     RUN <<EOF
         export DEBIAN_FRONTEND=noninteractive

         apt update
         apt -y install --no-install-recommends sudo

         echo "ubuntu ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers
     EOF

     USER ubuntu

     RUN <<EOF
         echo 'PS1="\[\033[0;31m\]\u@ubuntu:\[\033[0m\]\w$ "' > ~/.bashrc
         touch ~/.sudo_as_admin_successful
     EOF
   #+END_SRC
** nix                                                     :src:indent_fixed:
   #+BEGIN_SRC dockerfile
     FROM nixos/nix

     RUN <<EOF
         echo "extra-experimental-features = nix-command flakes" | tee -a /etc/nix/nix.conf
         echo 'PS1="\[\033[0;31m\]\u@nix:\[\033[0m\]\w$ "' > ~/.bashrc
     EOF
   #+END_SRC
